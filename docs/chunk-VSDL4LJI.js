import{b as D,c as I,d as E,k as H}from"./chunk-EUKOMUS6.js";import{i as P,j as k,k as w}from"./chunk-54UJDMYX.js";import{Ga as v,Ka as _,Va as u,Wa as o,X as h,Xa as n,Y as f,Ya as M,a as C,ab as b,b as x,cb as g,ea as m,eb as c,ib as i,jb as y,kb as p,mb as S,nb as U,ob as O,ua as a}from"./chunk-DCNC2EXY.js";function T(l,r){if(l&1&&(o(0,"div",9),i(1),n()),l&2){let e=c();a(),p(" ",e.errorMessage()," ")}}function L(l,r){if(l&1){let e=b();o(0,"div",10)(1,"h3"),i(2,"Shortened URL:"),n(),o(3,"div",11),M(4,"input",12),o(5,"button",13),g("click",function(){h(e);let s=c();return f(s.copyUrl())}),i(6," \u{1F4CB} Copy "),n()(),o(7,"div",14)(8,"div",15)(9,"span",16),i(10,"Original Length:"),n(),o(11,"span",17),i(12),n()(),o(13,"div",15)(14,"span",16),i(15,"Shortened Length:"),n(),o(16,"span",17),i(17),n()(),o(18,"div",15)(19,"span",16),i(20,"Saved:"),n(),o(21,"span",17),i(22),n()()()()}if(l&2){let e,t=c();a(4),u("value",t.shortenedUrl()),a(8),p("",t.originalUrl().length," characters"),a(5),p("",((e=t.shortenedUrl())==null?null:e.length)||0," characters"),a(5),p("",t.getSavings(),"%")}}function N(l,r){if(l&1){let e=b();o(0,"div",22)(1,"div",23)(2,"div",24),i(3),n(),o(4,"div",25),i(5),n(),o(6,"div",26),i(7),n()(),o(8,"div",27)(9,"button",28),g("click",function(){let s=h(e).$implicit,d=c(2);return f(d.copyUrlFromHistory(s.short))}),i(10," \u{1F4CB} "),n(),o(11,"button",29),g("click",function(){let s=h(e).$implicit,d=c(2);return f(d.deleteFromHistory(s))}),i(12," \u{1F5D1}\uFE0F "),n()()()}if(l&2){let e=r.$implicit,t=c(2);a(3),y(e.original),a(2),y(e.short),a(2),y(t.formatDate(e.createdAt))}}function V(l,r){if(l&1){let e=b();o(0,"div",18)(1,"h3"),i(2,"Recent URLs"),n(),o(3,"div",19),_(4,N,13,3,"div",20),n(),o(5,"button",21),g("click",function(){h(e);let s=c();return f(s.clearHistory())}),i(6," Clear History "),n()()}if(l&2){let e=c();a(4),u("ngForOf",e.urlHistory())("ngForTrackBy",e.trackByFn)}}var F=class l{urlInput="";shortenedUrl=m("");originalUrl=m("");errorMessage=m("");loading=m(!1);urlHistory=m([]);ngOnInit(){this.loadHistory()}isValidUrl(r){try{return new URL(r),!0}catch{return!1}}async shortenUrl(){if(!this.isValidUrl(this.urlInput)){this.errorMessage.set("Please enter a valid URL");return}this.loading.set(!0),this.errorMessage.set("");try{let e=`https://liil.co.in/s/${this.generateShortCode()}`;this.shortenedUrl.set(e),this.originalUrl.set(this.urlInput);let t={original:this.urlInput,short:e,createdAt:new Date};this.urlHistory.update(s=>[t,...s.slice(0,9)]),this.saveHistory()}catch{this.errorMessage.set("Failed to shorten URL. Please try again.")}this.loading.set(!1)}generateShortCode(){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="";for(let t=0;t<6;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}async copyUrl(){if(this.shortenedUrl())try{await navigator.clipboard.writeText(this.shortenedUrl()),console.log("URL copied to clipboard")}catch(r){console.error("Failed to copy URL:",r)}}async copyUrlFromHistory(r){try{await navigator.clipboard.writeText(r),console.log("URL copied to clipboard")}catch(e){console.error("Failed to copy URL:",e)}}deleteFromHistory(r){this.urlHistory.update(e=>e.filter(t=>t!==r)),this.saveHistory()}clearHistory(){this.urlHistory.set([]),this.saveHistory()}getSavings(){let r=this.originalUrl().length,e=this.shortenedUrl().length||0;return r===0?0:Math.round((r-e)/r*100)}formatDate(r){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)}trackByFn(r,e){return e.short}saveHistory(){localStorage.setItem("urlHistory",JSON.stringify(this.urlHistory()))}loadHistory(){let r=localStorage.getItem("urlHistory");if(r)try{let e=JSON.parse(r);this.urlHistory.set(e.map(t=>x(C({},t),{createdAt:new Date(t.createdAt)})))}catch(e){console.error("Failed to load URL history:",e)}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=v({type:l,selectors:[["app-url-shortener"]],decls:14,vars:6,consts:[[1,"url-container"],[1,"url-header"],[1,"url-form"],[1,"input-group"],["type","url","placeholder","Enter your long URL here...",1,"url-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"shorten-button",3,"click","disabled"],["class","error-message",4,"ngIf"],["class","result-section",4,"ngIf"],["class","url-history",4,"ngIf"],[1,"error-message"],[1,"result-section"],[1,"url-result"],["type","text","readonly","",1,"result-input",3,"value"],[1,"copy-button",3,"click"],[1,"url-stats"],[1,"stat"],[1,"stat-label"],[1,"stat-value"],[1,"url-history"],[1,"history-list"],["class","history-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"clear-button",3,"click"],[1,"history-item"],[1,"history-content"],[1,"original-url"],[1,"short-url"],[1,"created-at"],[1,"history-actions"],[1,"action-button",3,"click"],[1,"action-button","delete",3,"click"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),i(3,"\u{1F517} URL Shortener"),n(),o(4,"p"),i(5,"Create short, shareable links"),n()(),o(6,"div",2)(7,"div",3)(8,"input",4),O("ngModelChange",function(d){return U(t.urlInput,d)||(t.urlInput=d),d}),g("keyup.enter",function(){return t.shortenUrl()}),n(),o(9,"button",5),g("click",function(){return t.shortenUrl()}),i(10),n()(),_(11,T,2,1,"div",6),n(),_(12,L,23,4,"div",7)(13,V,7,2,"div",8),n()),e&2&&(a(8),S("ngModel",t.urlInput),a(),u("disabled",!t.isValidUrl(t.urlInput)||t.loading()),a(),p(" ",t.loading()?"Shortening...":"Shorten"," "),a(),u("ngIf",t.errorMessage()),a(),u("ngIf",t.shortenedUrl()),a(),u("ngIf",t.urlHistory().length>0))},dependencies:[w,P,k,H,D,I,E],styles:[".url-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background:#fff;border-radius:16px;box-shadow:0 4px 20px #0000001a}.url-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.url-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#333;font-size:2rem}.url-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.url-form[_ngcontent-%COMP%]{margin-bottom:2rem}.input-group[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.url-input[_ngcontent-%COMP%]{flex:1;padding:1rem;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;outline:none;transition:border-color .3s ease}.url-input[_ngcontent-%COMP%]:focus{border-color:#667eea}.shorten-button[_ngcontent-%COMP%]{padding:1rem 2rem;background:#667eea;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:background .3s ease}.shorten-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a6fd8}.shorten-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:#ff4757;background:#ffe6e6;padding:.75rem;border-radius:8px;border:1px solid #ffcccc}.result-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:1.5rem;margin-bottom:2rem}.result-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:#333}.url-result[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.result-input[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:1px solid #ddd;border-radius:8px;background:#fff;font-family:Courier New,monospace}.copy-button[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#4caf50;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600}.copy-button[_ngcontent-%COMP%]:hover{background:#45a049}.url-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem}.stat[_ngcontent-%COMP%]{text-align:center;padding:.5rem;background:#fff;border-radius:8px}.stat-label[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#666;margin-bottom:.25rem}.stat-value[_ngcontent-%COMP%]{font-weight:600;color:#333}.url-history[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:#333}.history-list[_ngcontent-%COMP%]{margin-bottom:1rem}.history-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;border:1px solid #e0e0e0;border-radius:8px;margin-bottom:.5rem;background:#fff}.history-content[_ngcontent-%COMP%]{flex:1}.original-url[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.25rem;word-break:break-all}.short-url[_ngcontent-%COMP%]{font-family:Courier New,monospace;color:#667eea;margin-bottom:.25rem}.created-at[_ngcontent-%COMP%]{font-size:.8rem;color:#666}.history-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-button[_ngcontent-%COMP%]{padding:.5rem;border:none;border-radius:4px;cursor:pointer;background:#f8f9fa;transition:background .3s ease}.action-button[_ngcontent-%COMP%]:hover{background:#e9ecef}.action-button.delete[_ngcontent-%COMP%]:hover{background:#ff4757;color:#fff}.clear-button[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#ff4757;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600}.clear-button[_ngcontent-%COMP%]:hover{background:#ff3742}@media (max-width: 768px){.url-container[_ngcontent-%COMP%]{padding:1rem}.input-group[_ngcontent-%COMP%], .url-result[_ngcontent-%COMP%]{flex-direction:column}.history-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.history-actions[_ngcontent-%COMP%]{justify-content:center}}"]})};export{F as UrlShortenerComponent};
